(function(){"use strict";var e={3731:function(e,t,s){var n=s(8935),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"fhir-visualizer"}},[s("main-component")],1)},o=[],i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.selectedResourceType?s("div",{staticClass:"position-absolute bg-white w-100 min-vh-100",staticStyle:{"z-index":"100"}},[s("div",{staticClass:"container text-center"},[s("div",{staticClass:"row py-3"},[s("div",{staticClass:"p-3 border shadow-lg"},[s("h3",[s("a",{staticClass:"text-decoration-none text-success",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.closeResourceType.apply(null,arguments)}}},[e._v(" "+e._s(e.patientName)+" ("+e._s(e.patientAge)+")")]),e._v(" / "+e._s(e.selectedResourceType)+" ")])]),s("div",{staticClass:"p-3 col-xl-8 m-auto small"},[s("div",{staticClass:"d-flex flex-wrap justify-content-center align-items-center"},e._l(e.selectedResourceTypeData,(function(t,n){return s("div",{key:n},[s("a",{staticClass:"text-decoration-none text-black",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.expandResource(t)}}},[s("div",{staticClass:"m-2 p-3 border rounded-3 shadow-lg"},[s("div",[s("b",[e._v("Record ID: "+e._s(t.resource.id))])]),s("div",[e._v("Updated on: "+e._s(t.resource.meta.lastUpdated))])])])])})),0)])])])]):e._e(),e.selectedResource?s("div",{staticClass:"position-absolute bg-white w-100 min-vh-100",staticStyle:{"z-index":"200"}},[s("div",{staticClass:"container text-center"},[s("div",{staticClass:"row py-3"},[s("div",{staticClass:"p-3 border shadow-lg"},[s("h3",[s("a",{staticClass:"text-decoration-none text-success",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.closeResourceType.apply(null,arguments)}}},[e._v(" "+e._s(e.patientName)+" ("+e._s(e.patientAge)+")")]),e._v(" / "),s("a",{staticClass:"text-decoration-none text-success",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.expandResourceType(e.selectedResource.resource.resourceType)}}},[e._v(" "+e._s(e.selectedResource.resource.resourceType)+" ")]),e._v(" / "+e._s(e.selectedResource.resource.resourceType)+" with ID "+e._s(e.selectedResource.resource.id)+" ")])]),s("div",{staticClass:"p-3 col-xl-6 m-auto small"},[s("div",{staticClass:"mt-2 p-3 border shadow-lg"},e._l(e.selectedResource.resource,(function(e,t){return s("div",{key:t,staticClass:"text-start"},[s("node-tree",{attrs:{name:t,node:e}})],1)})),0)])])])]):e._e(),s("div",{staticClass:"container text-center"},[s("div",{staticClass:"row py-3"},[this.patient?s("div",{staticClass:"p-3 border shadow-lg"},[s("h3",[e._v(e._s(e.patientName)+" ("+e._s(e.patientAge)+")")])]):s("div",[e._v("Loading...")]),s("div",{staticClass:"p-3 col-xl-8 m-auto"},[s("div",{staticClass:"d-flex flex-wrap justify-content-center align-items-center"},e._l(e.resourceTypes,(function(t,n){return s("div",{key:n},[s("a",{staticClass:"text-black",attrs:{href:""},on:{click:function(s){return s.preventDefault(),e.expandResourceType(t)}}},[s("div",{staticClass:"m-2 p-4 border rounded-3 shadow-lg"},[s("b",[e._v(e._s(t))])])])])})),0)])])])])},a=[],c=(s(6699),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mb-2"},[e.isFolder?s("div",[s("a",{staticClass:"fw-bold text-decoration-none text-black",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.toggle.apply(null,arguments)}}},[e._v(" "+e._s(e.name)+" "),s("span",[e._v("["+e._s(e.isOpen?"-":"+")+"]")])]),e.isOpen?s("div",{staticClass:"ms-3 mt-2"},e._l(e.node,(function(e,t){return s("div",{key:t},[s("node-tree",{attrs:{name:"Item #"+(t+1),node:e}})],1)})),0):e._e()]):s("div",["object"===typeof e.node?s("div",[s("div",[s("div",{staticClass:"mb-2"},[s("b",[e._v(e._s(e.name))])]),e._l(e.node,(function(e,t){return s("node-tree",{key:t,staticClass:"ms-3",attrs:{name:t,node:e}})}))],2)]):s("div",{staticClass:"mb-2"},["reference"===e.name?s("span",[s("a",{staticClass:"text-success",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.loadRef(e.node)}}},[e._v(e._s(e.node))])]):s("span",[s("b",[e._v(e._s(e.name)+":")]),e._v(" "+e._s(e.node))])])])])}),l=[],u={name:"NodeTree",props:["name","node"],data(){return{isOpen:!1}},computed:{isFolder:function(){return Array.isArray(this.node)&&this.node.length>0}},methods:{toggle:function(){this.isFolder&&(this.isOpen=!this.isOpen)},loadRef:function(e){this.$root.$emit("changeTo",e)}}},d=u,p=s(1001),f=(0,p.Z)(d,c,l,!1,null,null,null),h=f.exports,v={components:{NodeTree:h},data(){return{entry:[],timezone:"",resourceTypes:[],selectedResourceType:null,selectedResourceTypeData:[],selectedResource:null,selectedResourceData:null}},mounted(){this.axios.get(window.intersystemsUrl+"Patient/"+window.intersystemsPatientId+"/$everything").then((e=>{this.entry=e.data.entry,this.entry.forEach((e=>{this.resourceTypes.includes(e.resource.resourceType)||this.resourceTypes.push(e.resource.resourceType)}))})),this.timezone=window.moment.tz.guess(),this.$root.$on("changeTo",(e=>{this.changeResource(e)}))},methods:{getResourceData(e){return this.entry.filter((t=>t.resource.resourceType===e))},expandResourceType(e){this.closeResourceType(),this.selectedResourceType=e,this.selectedResourceTypeData=this.entry.filter((t=>t.resource.resourceType===e))},closeResourceType(){this.selectedResource=null,this.selectedResourceType=null,this.selectedResourceTypeData=[]},expandResource(e){this.closeResourceType(),this.selectedResource=e},closeResource(){this.selectedResource=null},changeResource(e){let t=e.substring(e.lastIndexOf("/")+1,e.length),s=e.substring(e.lastIndexOf("/"),0);this.selectedResourceType=s,this.selectedResourceTypeData=this.entry.filter((e=>e.resource.resourceType===s)),this.selectedResource=this.selectedResourceTypeData.filter((e=>e.resource.id===t))[0]}},computed:{patient(){let e=this.entry.filter((e=>"Patient"===e.resource.resourceType));return e.length>0?e[0].resource:null},patientName(){return this.patient?this.patient.name[0].family+", "+this.patient.name[0].given[0]:null},patientAge(){if(!this.patient)return null;let e=new Date,t=new Date(this.patient.birthDate),s=e.getFullYear()-t.getFullYear(),n=e.getMonth()-t.getMonth();return(n<0||0===n&&e.getDate()<t.getDate())&&s--,s}}},y=v,m=(0,p.Z)(y,i,a,!1,null,null,null),_=m.exports,g={name:"App",components:{MainComponent:_}},x=g,b=(0,p.Z)(x,r,o,!1,null,null,null),T=b.exports,R=s(6166),w=s.n(R),C=s(9483),O=s(150);s(44);window.moment=s(3189);const D=window.moment,k=s(8602),j=s(4003);D.extend(k),D.extend(j),n["default"].config.productionTip=!1,n["default"].use(C.Z,w()),n["default"].use(O.XG7),n["default"].use(D),new n["default"]({render:e=>e(T)}).$mount("#fhir-visualizer")}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,function(){s.amdO={}}(),function(){var e=[];s.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var a=!0,c=0;c<n.length;c++)(!1&o||i>=o)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var l=r();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],a=n[1],c=n[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(c)var u=c(s)}for(t&&t(n);l<i.length;l++)o=i[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},n=self["webpackChunkintersystems1"]=self["webpackChunkintersystems1"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(3731)}));n=s.O(n)})();
//# sourceMappingURL=app.4d6c0216.js.map